@model RentalManagementSyetem.Models.Dto_ClsApartment
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers



<div class="row">
    <input type="hidden" asp-for="ApartmentId" id="ApartmentId01" />

    <div class="col-6">
        <div class="input-group mb-3">
            <select class="form-control" required asp-items="@(ViewBag.building)" asp-for="BuildingId" id="BuildingId01">
                <option></option>
            </select>
        </div>
    </div>
    <div class="col-6">
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Price</span>
            <input type="text" asp-for="Price" id="Price01" class="form-control" placeholder="Enter price" id="" aria-label="name" aria-describedby="basic-addon1">
        </div>
    </div>
   
</div>

<div class="row">
    <div class="col-12">
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Address</span>
            <textarea type="text" asp-for="Address" id="Address01" class="form-control" placeholder="Enter Address" id="" aria-label="name" aria-describedby="basic-addon1"></textarea>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-3">
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Bedrooms</span>
            <input type="text" asp-for="Bedrooms" id="Bedrooms01" class="form-control" placeholder="Enter Bedrooms" id="" aria-label="name" aria-describedby="basic-addon1">
        </div>
    </div>
    <div class="col-3">
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Bathrooms</span>
            <input type="text" asp-for="Bathrooms" id="Bathrooms01" class="form-control" placeholder="Enter Bathrooms" id="" aria-label="name" aria-describedby="basic-addon1">
        </div>
    </div>
    <div class="col-6">
        <div class="input-group mb-3">
            <span class="input-group-text">Status</span>
            <select class="form-control" asp-for="Status" id="Status01">
                <option selected>Active</option>
                <option>Inactive</option>
            </select>
        </div>
    </div>
</div>


<script>
    $(document).ready(function () {

        $("#BuildingId01").select2({
            dropdownParent: $('#itemModel'),
            placeholder: "Select a Building",
            allowClear: true,
            width: '380px'
        });

        //Insert Or Upadet Entity
        $(".save01").on('click', function (e) {
            e.preventDefault();

            // get value from input
            var ApartmentId = $("#ApartmentId01").val();
            var BuildingId = $("#BuildingId01").val();
            var Price = $("#Price01").val();
            var Address = $("#Address01").val();
            var Bedrooms = $("#Bedrooms01").val();
            var Bathrooms = $("#Bathrooms01").val();
            var status = $("#Status01 option:selected").val();
            //end
            var assignaction = 0;
            if (ApartmentId == 0) {
                assignaction = "Save";
            }
            else {
                assignaction = "Update"
            }
            //set value in a object
            var apartmentobject = {
                ApartmentId: ApartmentId,
                BuildingId: BuildingId,
                Price:Price,
                Address: Address,
                Bedrooms: Bedrooms,
                Bathrooms: Bathrooms,
                status: status,
            }
            //end
            var jsonobject = JSON.stringify(apartmentobject);

            //pass data to controller
            $.ajax({
                url: "/SetUp/InsertUpdateDeleteApartment",
                type: "post",
                dataType: "json",
                data: { aprtmentobj: jsonobject, action: assignaction },
                success: function (response) {
                    alert(response.data);
                    window.location.href = "/SetUp/ApartmentIndex"
                },
                error: function () {
                    alert("Errr:")
                }
            })
            // end
        })
        //End
        //Insert Or Upadet Entity
        $(".Delete02").on('click', function (e) {
            e.preventDefault();


            // get value from input
            var ApartmentId = $("#ApartmentId01").val();
            var BuildingId = $("#BuildingId01").val();
            var Price = $("#Price01").val();
            var Address = $("#Address01").val();
            var Bedrooms = $("#Bedrooms01").val();
            var Bathrooms = $("#Bathrooms01").val();
            var status = $("#Status01 option:selected").val();
            //end
           
            //set value in a object
            var apartmentobject = {
                ApartmentId: ApartmentId,
                BuildingId: BuildingId,
                Price: Price,
                Address: Address,
                Bedrooms: Bedrooms,
                Bathrooms: Bathrooms,
                status: status,
            }
            //end
            var jsonobject = JSON.stringify(apartmentobject);

            //pass data to controller
            $.ajax({
                url: "/SetUp/InsertUpdateDeleteApartment",
                type: "post",
                dataType: "json",
                data: { aprtmentobj: jsonobject, action: "Delete" },
                success: function (response) {
                    alert(response.data);
                    window.location.href = "/SetUp/ApartmentIndex"
                },
                error: function () {
                    alert("Errr:")
                }
            })
            // end
        })
        //End
    })
</script>